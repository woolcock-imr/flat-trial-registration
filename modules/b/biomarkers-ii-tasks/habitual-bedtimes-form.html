<div id=D__ID>
        <section id=form_container__ID>
            <div id=header__ID>
                Habitual Bedtimes
            </div>
            <form id=F__ID>
                <div class='container'>
                    <!-- participant part for all tsak forms -------------------->
                    <div class='row row__ID' id=row_participant__ID>
                        <div class='col-sm-12 col-lg-9 input__ID'>
                            <span class='label__ID'>Participant</span><br>
                            <input type='text' name='Participant' class='form-control' id='Participant__ID' data-id='Participant' required />
                        </div>
                        <div class='col-sm-12 col-lg-3 input__ID'>
                            <span class='label__ID'>Participant ID</span><br>
                            <input type='text' name='Participant_uid' class='form-control' readonly />
                        </div>
                        <hr style='border-top: 1px solid #888;width: 100%;margin:10px 0'>
                    </div>
                    <!---------------------------------------------------->
    
                    <!-- FORM INPUTS -->
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Habitual bed time from actigraphy recordings</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Habitual wake time from actigraphy recordings</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='HBT_bedTime' placeholder='2019-02-02T22:30:00' data-format='HH:mm' value data-date readonly required />
                        </div>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='HBT_wakeTime' placeholder='2019-02-02T07:30:00' data-format='HH:mm' value data-date readonly required />
                        </div>
                    </div>
                    </div></div>
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Average lights off time from actigraphy recordings</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Average lights on time from actigraphy recordings</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='HBT_lightsOff' placeholder='2019-02-02T23:30:00' data-format='HH:mm' value data-date readonly required />
                        </div>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='HBT_lightsOn' placeholder='2019-02-02T08:30:00' data-format='HH:mm' value data-date readonly required />
                        </div>
                    </div>
                    </div></div>
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Lab night's bed time</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Lab night's wake time</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='LAB_bedTime' placeholder='2019-02-02T22:30:00' data-format='HH:mm:ss' value data-date readonly required />
                        </div>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='LAB_wakeTime' placeholder='2019-02-02T07:30:00' data-format='HH:mm:ss' value data-date readonly required />
                        </div>
                    </div>
                    </div></div>
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Lab night's lights off time</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Lab night's lights on time</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='LAB_lightsOff' placeholder='2019-02-02T23:30:00' data-format='HH:mm:ss' value data-date readonly required />
                        </div>
                        <div class='col'>
                            <input type='text' class='form-control picker' name='LAB_lightsOn' placeholder='2019-02-02T08:30:00' data-format='HH:mm:ss' value data-date readonly required />
                        </div>
                    </div>
                    </div></div>

                    <!-- submit button part for all tsak forms------------>
                    <br>
                    <div class='row'>
                        <div class='col'>
                            <button id='submit__ID' type='submit' class='btn btn-secondary'>Submit</button>
                        </div>
                    </div>
                    <!---------------------------------------------------->
                </div>
            </form>
        </section>
        <script>
            function F__ID(){
                //-------------------------------------
                VmInclude:'__COMPONENT__/f/form.01.js'
                VmInclude:'__CURRENT_PATH__/task-form.js'
                //-------------------------------------

                function changeValue( event ) {
                    // Get the closest input element to read the data
                    el = $(event.target).closest('.picker-time-face').find('input');
                    var v = $(el).val();
                    var f = $(el).attr('data-format');
                    d = moment(el.attr('data-date'));
                    
                    if (v != "") {
                        // Change the data accordingly
                        if ((event.data.change == 'Y' || event.data.change == 'YY' || event.data.change == 'YYYY') && event.data.direction == 1) { // Up the Years
                            d = moment(el.attr('data-date')).add(1, 'years').format('YYYY-MM-DDTHH:mm:ss');
                        } else if ((event.data.change == 'Y' || event.data.change == 'YY' || event.data.change == 'YYYY') && event.data.direction == -1) { // Down the Years
                            d = moment(el.attr('data-date')).subtract(1, 'years').format('YYYY-MM-DDTHH:mm:ss');
                        } 
                        else if ((event.data.change == 'M' || event.data.change == 'MM' || event.data.change == 'MMM' || event.data.change == 'MMMM' ) && event.data.direction == 1) { // Up the Months
                            d = moment(el.attr('data-date')).add(1, 'months').format('YYYY-MM-DDTHH:mm:ss');
                        } else if ((event.data.change == 'M' || event.data.change == 'MM' || event.data.change == 'MMM' || event.data.change == 'MMMM' ) && event.data.direction == -1) { // Down the Months
                            d = moment(el.attr('data-date')).subtract(1, 'months').format('YYYY-MM-DDTHH:mm:ss');
                        }
                        else if ((event.data.change == 'D' || event.data.change == 'Do' || event.data.change == 'DD') && event.data.direction == 1) { // Up the Days
                            d = moment(el.attr('data-date')).add(1, 'days').format('YYYY-MM-DDTHH:mm:ss');
                        } else if ((event.data.change == 'D' || event.data.change == 'Do' || event.data.change == 'DD') && event.data.direction == -1) { // Down the Days
                            d = moment(el.attr('data-date')).subtract(1, 'days').format('YYYY-MM-DDTHH:mm:ss');
                        } 
                        else if ((event.data.change == 'H' || event.data.change == 'HH' || event.data.change == 'h' || event.data.change == 'hh' || event.data.change == 'k' || event.data.change == 'kk') && event.data.direction == 1) { // Up the hours
                            d = moment(el.attr('data-date')).add(1, 'hours').format('YYYY-MM-DDTHH:mm:ss');
                        } else if ((event.data.change == 'H' || event.data.change == 'HH' || event.data.change == 'h' || event.data.change == 'hh' || event.data.change == 'k' || event.data.change == 'kk') && event.data.direction == -1) { // Down the hours
                            d = moment(el.attr('data-date')).subtract(1, 'hours').format('YYYY-MM-DDTHH:mm:ss');
                        } 
                        else if ((event.data.change == 'm' || event.data.change == 'mm') && event.data.direction == 1) { // Up the minutes
                            d = moment(el.attr('data-date')).add(1, 'minutes').format('YYYY-MM-DDTHH:mm:ss');
                        } else if ((event.data.change == 'm' || event.data.change == 'mm') && event.data.direction == -1) { // Down the minutes
                            d = moment(el.attr('data-date')).subtract(1, 'minutes').format('YYYY-MM-DDTHH:mm:ss');
                        } 
                        else if ((event.data.change == 's' || event.data.change == 'ss') && event.data.direction == 1) { // Up the seconds
                            d = moment(el.attr('data-date')).add(5, 'seconds').format('YYYY-MM-DDTHH:mm:ss');
                        } else if ((event.data.change == 's' || event.data.change == 'ss') && event.data.direction == -1) { // Down the seconds
                            d = moment(el.attr('data-date')).subtract(5, 'seconds').format('YYYY-MM-DDTHH:mm:ss');
                        }
                    } else {
                        d = moment(el.attr('data-date')).format('YYYY-MM-DDTHH:mm:ss');
                    }
                    // Store the data and value.
                    $(el).attr('data-date',d);
                    $(el).val(moment(d).format(f));
                }

                $('.picker').each(function () {
                    // Get the default date and data-format
                    var d = $(this).attr('placeholder');
                    var f = $(this).attr('data-format');

                    // Split the data-format string into its components
                    var dlm = f.split(/[^A-Za-z0-9]/);
                    
                    // Create the Moment.js object according to standardized formatting
                    // and store it in the data-date attribute
                    $(this).attr('data-date',moment(d).format('YYYY-MM-DDTHH:mm:ss'));

                    // Create the Moment.js object accorting to the desired formatting
                    // and store it in the placeholder
                    $(this).attr('placeholder',moment(d).format(f));
                    
                    // Wrap the input with a div element of width 'w'
                    var w = (moment(d).format(f).length * 12 + 18) + "px;"
                    var wrapper = "<div class='picker-time-face' style='width:" + w + ";'></div>";
                    $(this).wrap(wrapper);

                    // If the formatting includes time, i.e. it includes minutes,
                    // the user can only change hours, minutes and seconds, not the days months or years.
                    if (dlm.includes('m') || dlm.includes('mm')) {
                        var permitted = ['s','ss','m','mm','H','HH','h','hh','k','kk'];
                    } else {
                        var permitted = ['D','Do','DD','M','MM','MMM','MMMM','Y','YY','YYYY'];
                    }

                    // Create the up and down arror elements
                    // - The row has a padding equal to the padding of the input
                    var rowUp = $('<div style="padding:0 0.75em;"></div>');
                    var rowDw = $('<div style="padding:0 0.75em;"></div>');
                    
                    // - For each field, create a column div that contains the arrow
                    // - And assign a change-function to the event of a click
                    for (var n = 0; n < dlm.length; n++) {
                        if (permitted.includes(dlm[n])) {
                            var spnFc = $("<div class='picker-face' style='width:" + 100 / dlm.length + "%;'><span class='picker-fa fa fa-angle-up'></span></div>");
                            var spnUp = $("<div class='picker-dial' style='width:" + 100 / dlm.length + "%;'><span class='picker-fa fa fa-angle-up'></span></div>");
                            var spnDw = $("<div class='picker-dial' style='width:" + 100 / dlm.length + "%;'><span class='picker-fa fa fa-angle-down'></span></div>");
                            spnUp.on('click', {
                                direction: 1,
                                change: dlm[n]
                            }, changeValue );
                            spnDw.on('click', {
                                direction: -1,
                                change: dlm[n]
                            }, changeValue );
                        } else {
                            var spnUp = $("<div class='picker-dial' style='width:" + 100 / dlm.length + "%;'></div>");
                            var spnDw = $("<div class='picker-dial' style='width:" + 100 / dlm.length + "%;'></div>");
                        }
                        // Append the column div to the row.
                        rowUp.append(spnUp);
                        rowDw.append(spnDw);
                    }
                    // Insert the rows before and after the input element.
                    $(this).before(rowUp);
                    $(this).after(rowDw);
                });
                
            }
        </script>
        <style>
            VmInclude:__COMPONENT__/f/form.01.css
            VmInclude:__CURRENT_PATH__/task-form.css
            VmInclude:__CURRENT_PATH__/task-form-pickers.css
        </style>
    </div>